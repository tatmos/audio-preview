<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>オーディオプレビュー</title>
    <link rel="stylesheet" href="/src/styles.css" />
  </head>
  <body>
    <div id="app">
      <div id="dropzone" class="dropzone"></div>
      <div class="list-toolbar">
        <button type="button" id="btn-save-list" class="toolbar-btn">セーブ</button>
        <button type="button" id="btn-load-list" class="toolbar-btn">ロード</button>
        <input type="file" id="input-load-list" accept=".txt,text/plain" hidden />
      </div>
      <div class="elapsed-row">
        <div class="elapsed-block">
          <div class="transport" role="group" aria-label="再生コントロール">
            <button type="button" id="btn-prev" class="transport-btn" aria-label="前へ" title="前の曲へ／曲の頭に戻る">
              <svg class="transport-icon" viewBox="0 0 24 24" width="22" height="22" aria-hidden="true"><path d="M6 6h2v12H6V6zm3.5 6l8.5 6V6l-8.5 6z"/></svg>
            </button>
            <button type="button" id="btn-play-pause" class="transport-btn transport-btn-play" aria-label="再生" title="再生／一時停止">
              <svg class="transport-icon transport-icon-play" viewBox="0 0 24 24" width="22" height="22" aria-hidden="true"><path d="M8 5v14l11-7L8 5z"/></svg>
              <svg class="transport-icon transport-icon-pause" viewBox="0 0 24 24" width="22" height="22" aria-hidden="true" style="display:none"><path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"/></svg>
            </button>
            <button type="button" id="btn-next" class="transport-btn" aria-label="次へ" title="次の曲へ">
              <svg class="transport-icon" viewBox="0 0 24 24" width="22" height="22" aria-hidden="true"><path d="M6 18l8.5-6L6 6v12zM16 6v12h2V6h-2z"/></svg>
            </button>
            <span class="transport-speed-label" aria-hidden="true">速度</span>
            <div class="transport-speed" role="group" aria-label="再生速度">
              <button type="button" class="transport-speed-btn" data-rate="0.5" aria-label="0.5倍速">0.5x</button>
              <button type="button" class="transport-speed-btn is-active" data-rate="1" aria-label="等速">1x</button>
              <button type="button" class="transport-speed-btn" data-rate="1.5" aria-label="1.5倍速">1.5x</button>
              <button type="button" class="transport-speed-btn" data-rate="2" aria-label="2倍速">2x</button>
            </div>
          </div>
          <div class="elapsed-top">
            <span id="elapsed-display" class="elapsed-display" aria-live="polite">再生経過: 0:00 / 0:00</span>
          </div>
          <div class="elapsed-progress-bar" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100">
            <div class="elapsed-progress-segments" id="elapsed-progress-segments" aria-hidden="true"></div>
            <div id="elapsed-progress-fill" class="elapsed-progress-fill"></div>
          </div>
          <div class="realtime-tonal" aria-live="polite">
            <span class="realtime-tonal-label">Key:</span>
            <span id="realtime-key" class="realtime-tonal-value">—</span>
            <span class="realtime-tonal-label">Chord:</span>
            <span id="realtime-chord" class="realtime-tonal-value">—</span>
          </div>
        </div>
        <div id="level-meters" class="level-meters"></div>
      </div>
      <div id="list-container"></div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@4.21.0/dist/tf.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/essentia.js@0.1.3/dist/essentia.js-model.js"></script>
    <script type="module" src="/src/main.js"></script>
  </body>
</html>
